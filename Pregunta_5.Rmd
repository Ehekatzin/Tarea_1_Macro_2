---
title: "Macroeconomía II"
subtitle: "Tarea 1: Consumo"
author: 
  - Germán Augusto Campos Ortiz^[gacampos@colmex.mx] 
  - Marcos Ehekatzin García Guzmán^[marcgarcia@colmex.mx]
  - Magdaleno Mendoza del Toro^[mamendoza@colmex.mx]
  - Sergio Arturo Vargas Magaña^[sevargas@colmex.mx]
date: ""
output: 
  pdf_document:
    toc: false
    toc_depth: 2
tables: true
toc-title: Contenido
urlcolor: blue
header-includes:
   - \usepackage[nottoc]{tocbibind} \usepackage{graphicx} \usepackage{amsmath} \usepackage{fancyhdr} \pagestyle{fancy} \usepackage{enumitem} \fancyhead[L]{\includegraphics[width=3.5cm]{colmex.jpg}}
   - \renewcommand{\listfigurename}{Lista de figuras}
   - \renewcommand{\listtablename}{Lista de tablas}
---


 
 

```{r setup, include=FALSE, message=FALSE}
knitr::opts_chunk$set(echo = TRUE)
library(knitr)
library(tinytex)
library(ggplot2)
library(siebanxicor)
library(tidyverse)
library(lubridate)
library(reshape2)
options(knitr.duplicate.label = "allow")

```

## Acertijo del premio al riesgo

Estudie el "acertijo del premio al riesgo" para el caso de México siguiendo estos pasos:

1. Consiga los valores anuales de IPC, el Indice de Precios y Cotizaciones de la Bolsa Mexicana de Valores por lo menos desde 1990.

Los datos mensuales del Índice de Precios y Cotizaciones de la Bolsa Mexicana de Valores se obtuvieron de [Banxico](https://www.banxico.org.mx/SieInternet/consultarDirectorioInternetAction.do?sector=7&accion=consultarCuadro&idCuadro=CF57&locale=es). La obtención de los valores anuales se realizó de dos formas:

1. Tomando el valor de cierre de año.
2. Promediar los valores mensuales.





```{r , include=FALSE}
#Se incluyen los datos mensuales del IPC desde la API de Banxico

setToken("b907777dab4bbd46a0edd2149904098bc71590bbb00962de1c3d5d162270b21c")

idSeries <- c("SF4782")

series <- getSeriesData(idSeries, '1990-01-01','2020-12-31')

IPC <- getSerieDataFrame(series, "SF4782")

IPC = IPC %>% 
  mutate(date = ymd(date)) %>% 
  mutate_at(vars(date), funs(year, month, day))

#Para el IPC anual se toma el último valor del año

IPC_cierre <- subset(IPC, month == 12)

drop <- c("date", "month", "day")

IPC_cierre <- IPC_cierre[,!(names(IPC_cierre)%in%drop)]

IPC_mean <- aggregate(IPC[, 2], list(IPC$year), mean)

names(IPC_mean) = c("year", "IPC_mean")
names(IPC_cierre) = c("IPC_cierre", "year")

  
IPC_anual <- merge(IPC_cierre,IPC_mean, by=c("year"))

IPC_anual

```

```{r , echo= FALSE}
#knitr::kable(IPC_anual, format="latex", caption = "Valores anuales del IPC", col.names = c("Año","Cierre", "Media"), position = "!h")
```
```{r g1, echo=FALSE, fig.cap="Índice de Precios y Cotizaciones", position = "!h", lable = "g1"}

d <- melt(IPC_anual, id.vars="year")
names(d) = c("year", "Variable", "value")


ggplot(d, aes(x=year, y=value, group=Variable)) +
  geom_line(aes(linetype=Variable))+
  geom_point()+
  theme_classic()+
  xlab("Año")+
  ylab("IPC")+
  scale_color_brewer(palette = "Set2")
```


Como puede verse en la gráfica los valores de ambos cálculos son relativamente cercanos, el ejercicio propuesto será realizado con ambas variables.


\newpage
